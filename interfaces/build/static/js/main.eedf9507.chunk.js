(this.webpackJsonpinterfaces=this.webpackJsonpinterfaces||[]).push([[0],{242:function(e,t,a){},494:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a(62),i=a.n(n),s=(a(242),a(9)),c=a(236),o=a(235),l=a.n(o),d=a(2);var j=function(e){if(!e.value)return null;if(e.value===Object(e.value)&&!Array.isArray(e.value))return null;var t=e.value,a=e.field,r=e.attribs,n=e.nodeData;Array.isArray(t)&&(t=t.join(", "));var i="";if(!0===r.showLabel){var s=r.label;i=Object(d.jsx)("div",{className:"node-field-label "+a,children:s})}else i="";return r.truncate&&t.length>r.truncate&&(t=t.slice(0,r.truncate)+"..."),r.link&&(t=Object(d.jsx)("a",{href:n[r.link],children:t})),Object(d.jsxs)("div",{className:"node-field "+a,children:[i,Object(d.jsx)("div",{className:"node-field-value "+a,children:t})]})};var u=function(e){var t=[];if("HTML"==e.settings.apiNodeFormat)t=Object(d.jsx)("div",{dangerouslySetInnerHTML:{__html:e.nodeData}});else if(e.settings.directoryDisplaySchema)for(var a in e.settings.directoryDisplaySchema)e.settings.directoryDisplaySchema.hasOwnProperty(a)&&t.push(Object(d.jsx)(j,{field:a,value:e.nodeData[a],attribs:e.settings.directoryDisplaySchema[a],nodeData:e.nodeData}));return Object(d.jsx)("div",{className:"directory-node",children:t})};var m=function(e){var t,a=Object(r.useState)(0),n=Object(s.a)(a,2),i=n[0],c=n[1],o=Object(r.useState)(null),j=Object(s.a)(o,2),m=j[0],b=j[1],p=parseInt(e.settings.nodesPerPage)||15,h=e.nodes,g=Object(r.useRef)();return Object(r.useEffect)((function(){var e=parseInt(i)*p,t=parseInt(e)+p;b(h.slice(e,t))}),[i,h]),e.loaded||(t=Object(d.jsx)("div",{class:"mri-directory-loading",children:Object(d.jsx)("img",{src:e.settings.clientPathToApp+"build/images/spinner.gif"})})),Object(d.jsxs)("div",{ref:g,className:"mri-directory",children:[e.loaded?Object(d.jsxs)("div",{className:"node-list",children:[Object(d.jsxs)("div",{className:"node-count",children:[h.length," results found"]}),m.map((function(t){return Object(d.jsx)(u,{nodeData:t,settings:e.settings})}))]}):t,Object(d.jsx)("div",{className:"react-paginate",children:Object(d.jsx)(l.a,{previousLabel:"prev",nextLabel:"next",breakLabel:"...",breakClassName:"break-me",pageCount:h.length/p,marginPagesDisplayed:2,pageRangeDisplayed:p,onPageChange:function(e){c(e.selected),g.current.scrollIntoView({behavior:"smooth"})},containerClassName:"pagination",subContainerClassName:"pages pagination",pageClassName:"page-link-li",activeClassName:"active"})})]})},b=a(496),p=a(499),h=a(497),g=a(498),f=a(16),O=a.n(f),v=function(e){var t=e.node;return Object(d.jsxs)("div",{children:[t.image&&Object(d.jsx)("img",{src:t.image[0].url||t.image,onError:function(e){e.currentTarget.style.display="none"},alt:t.name+" image",maxWidth:"50%",height:8}),Object(d.jsx)("div",{children:t.url||t.urls||t.primary_url?Object(d.jsx)("a",{href:t.primary_url||t.url||t.urls[0].url,target:"_blank",rel:"noopener noreferrer",children:Object(d.jsx)("span",{wordBreak:"break-all",children:t.name})}):Object(d.jsx)("span",{wordBreak:"break-all",children:t.name})}),t.description&&Object(d.jsx)("div",{children:t.description.length>250?"".concat(t.description.slice(0,250),"..."):t.description})]})};a(493);delete O.a.Icon.Default.prototype._getIconUrl;var x=function(e){var t,a=e.nodes,r=e.settings,n=e.loaded;return O.a.Icon.Default.mergeOptions({iconRetinaUrl:r.clientPathToApp+"build/images/marker-icon-2x.png",iconUrl:r.clientPathToApp+"build/images/marker-icon.png",shadowUrl:r.clientPathToApp+"build/images/marker-shadow.png"}),n||(t=Object(d.jsx)("div",{class:"mri-map-loading",children:Object(d.jsx)("img",{src:r.clientPathToApp+"build/images/spinner.gif",alt:"loading..."})})),Object(d.jsxs)("div",{class:"mri-map",children:[t,Object(d.jsxs)(b.a,{center:r.mapCenter,zoom:r.mapZoom,scrollWheelZoom:r.mapAllowScrollZoom,children:[Object(d.jsx)(p.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),a.map((function(e){if(e.data){var t=e.id;(e=e.data).id=t}return Object(d.jsxs)("div",{children:[e.geolocation?Object(d.jsx)(h.a,{position:[parseFloat(e.geolocation.lat),parseFloat(e.geolocation.lon)],children:Object(d.jsx)(g.a,{children:Object(d.jsx)(v,{node:e})})}):null,e.latitude&&e.longitude?Object(d.jsx)(h.a,{position:[parseFloat(e.latitude),parseFloat(e.longitude)],children:Object(d.jsx)(g.a,{children:Object(d.jsx)(v,{node:e})})}):null]},"".concat(e.id||e.objectID))}))]})]})};var y=function(e){var t=this,a=e.settings,n=e.interfaceComp,i=Object(r.useState)(!1),o=Object(s.a)(i,2),l=o[0],j=o[1],u=Object(r.useState)(!1),b=Object(s.a)(u,2),p=b[0],h=b[1],g=Object(r.useState)([]),f=Object(s.a)(g,2),O=f[0],v=f[1],y=Object(r.useState)(null),S=Object(s.a)(y,2),D=S[0],N=S[1],w=Object(r.useState)(a.formData),k=Object(s.a)(w,2),C=k[0],I=k[1],P=Object(r.useState)(null),A=Object(s.a)(P,2),E=A[0],T=A[1];Object(r.useEffect)((function(){L()}),[]);var F,L=function(e){var t=a.apiUrl,r=a.apiNodeFormat;j(!1),v([]),e?T(e):E&&(e=E);var i=new URLSearchParams(e);"directory"==n&&i.set("format",r),D&&i.set("search",D),fetch(t+"?"+i.toString()).then((function(e){return e.json()})).then((function(e){j(!0),v(e)}),(function(e){j(!0),h(e)}))},R=a.filterSchema;return p?F=Object(d.jsxs)("div",{children:["Error: ",p.message]}):"directory"==n?F=Object(d.jsx)(m,{nodes:O,settings:a,loaded:l}):"map"==n&&(F=Object(d.jsx)(x,{nodes:O,settings:a,loaded:l})),Object(d.jsxs)("div",{className:"mri-interface",children:[a.showFilters?Object(d.jsx)("div",{className:"mri-filter-form",children:Object(d.jsx)(c.a,{schema:R,formData:C,onChange:function(e,t){var r=e.formData,n="";I(r),Object.keys(r).forEach((function(e,t){if(r[e]&&"any"!=r[e]&&""!=r[e]){if("operator"in a.filterSchema.properties[e])var i=a.filterSchema.properties[e].operator;else i="equals";n+="filters["+t+"][0]="+e+"&",n+="filters["+t+"][1]="+i+"&",n+="filters["+t+"][2]="+r[e]+"&"}})),L(n)},onError:function(){console.log("errors",t)}})}):null,Object(d.jsxs)("div",{className:"mri-content-container",children:[Object(d.jsx)("div",{className:"mri-search-form",children:Object(d.jsxs)("form",{action:"/",onSubmit:function(e){e.preventDefault(),L()},children:[Object(d.jsx)("input",{type:"text",name:"search",onChange:function(e){N(e.target.value)},value:D}),Object(d.jsx)("button",{type:"submit",children:"Search"})]})}),F]})]})},S=document.getElementById("murmurations-react-directory"),D=document.getElementById("murmurations-react-map");if(S){var N=window.wpReactSettings;i.a.render(Object(d.jsx)(y,{settings:N,interfaceComp:"directory"}),S)}if(D){var w=window.wpReactSettings;i.a.render(Object(d.jsx)(y,{settings:w,interfaceComp:"map"}),D)}}},[[494,1,2]]]);
//# sourceMappingURL=main.eedf9507.chunk.js.map